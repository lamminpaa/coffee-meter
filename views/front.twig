<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Coffee</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="../css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
        body {
            padding-top: 20px;
            padding-bottom: 40px;
        }

            /* Custom container */
        .container-narrow {
            margin: 0 auto;
            max-width: 700px;
        }
        .container-narrow > hr {
            margin: 30px 0;
        }

            /* Main marketing message and sign up button */
        .jumbotron {
            margin: 60px 0;
            text-align: center;
        }
        .jumbotron h1 {
            font-size: 72px;
            line-height: 1;
        }
        .jumbotron .btn {
            font-size: 21px;
            padding: 14px 24px;
        }

            /* Supporting marketing content */
        .marketing {
            margin: 60px 0;
        }
        .marketing p + h4 {
            margin-top: 28px;
        }
    </style>
    <link href="../css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
    <script src="../js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>

<div class="container-narrow">

    <div class="masthead">
        <h3 class="muted">Coffee Meter</h3>
    </div>

    <hr>
    <div class="row-fluid marketing">
        <div class="span6">
            <h4>Coffee Blend?</h4>
            <p id="blend">

            </p>

            <h4>Cook</h4>
            <p id="cook" ></p>

            <h4>Kooks comments</h4>
            <p id="comment"></p>
        </div>

        <div class="span6">
            <h4>Timer</h4>
            <p>
                <div class="progress">
                    <div id="progressBar" class="bar" style="width: 0%;"></div>
                </div>
            </p>

            <h4>Time of cooking</h4>
            <p id="timeOfCooking"></p>

            <h4>Make new coffee</h4>
            <!-- Button to trigger modal -->
            <p></p><a href="#myModal" role="button" class="btn" data-toggle="modal">New coffee</a><p/>

            <!-- Modal -->
            <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                    <h3 id="myModalLabel">Modal header</h3>
                </div>
                <div class="modal-body">
                    <form id="coffeeForm">
                        <input type="text" name="blend"><span class="help-inline">Blend</span><br>
                        <input type="text" name="name"><span class="help-inline">Name of the cook</span><br>
                        <input type="text" name="comment"><span class="help-inline">Comments</span><br>
                    </form>

                </div>
                <div class="modal-footer">
                    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                    <button id="buttonSave" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>




    </div>

    <hr>

    <div class="footer">
        <p>&copy; Kalle Lamminpää 2013 <a href="https://github.com/lamminpaa/coffee-meter">This project is open source!<a/></p>
    </div>

</div> <!-- /container -->

<!-- Le javascript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script type="text/javascript">
    var w;
    $('#buttonSave').on('click', function (e) {
        var coffee = $('#coffeeForm').serializeArray();
        console.log(coffee);
        var myDate = new Date();
        $('#myModal').modal('toggle');
        $('#timeOfCooking').html((myDate.getDate()) + '/' +(myDate.getMonth()+1) + ' '+(myDate.getHours()) + ':'+(myDate.getMinutes()));
        $('#blend').html(coffee[0].value);
        $('#cook').html(coffee[1].value);
        $('#comment').html(coffee[2].value);
        document.getElementById('progressBar').style.width=0+'%';

    })

    setInterval(function() {
        w = parseInt(document.getElementById('progressBar').style.width);
        if(w!=100){
            document.getElementById('progressBar').style.width= (w + 1) +'%';
        }

    }, 60000);


</script>

</body>
</html>
